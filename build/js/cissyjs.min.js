/*!cissyjs2014-09-26*/
!function(a){var b=function(){var a='<p class="cy-top-bar">\n					<button type="button" class="attr" data-trigger="">设置</button>\n					<button type="button" class="attr remove" data-trigger="remove">删除</button>\n			</p>',b='<p class="cy-bottom-bar">\n					<button type="button" class="attr add" data-trigger="add">添加模块</button>\n			</p>',c=function(){this.cyMol=$(".cy-module")};return c.prototype={events:function(){var a=function(){this.X=this.Y=0};return a.prototype={remove:function(){$(this).closest(".cy-module").remove()},add:function(){},dragDown:function(a){var a=a||window.event;this.X=a.clientX-this.offsetLeft,this.Y=a.clientY-this.offsetTop,this.drag=!0,this.moveTemp=this.cloneNode(!0),document.body.appendChild(this.moveTemp)},dragMove:function(a){if(this.drag){var a=a||window.event,b=a.clientX-this.X,c=a.clientY-this.Y,d=document.documentElement.clientWidth-this.offsetWidth,e=document.documentElement.clientHeight-this.offsetHeight;return 0>=b&&(b=0),0>=c&&(c=0),b>=d&&(b=d),c>=e&&(c=e),console.log(this.moveTemp),this.moveTemp.style.zIndex=99,this.moveTemp.style.opacity="0.5",this.moveTemp.style.filter="alpha(opacity=50)",this.moveTemp.style.left=b+"px",this.moveTemp.style.top=c+"px",!1}},drapUp:function(){this.drag=!1,document.onmousemove=null,document.onmouseup=null,oDrag.style.opacity=this.moveTemp.style.opacity;({left:this.moveTemp.offsetLeft,top:this.moveTemp.offsetTop});this.style.zIndex=this.moveTemp.style.zIndex,this.releaseCapture&&this.releaseCapture()}},new a},bind:function(){var a=this;this.cyMol.on("click",".remove,.add",function(b){b.stopPropagation();var c=$(this);console.log(a),a.events()[c.attr("data-trigger")].call(this,b)}).on({mousedown:function(){a.events().dragDown.call(this,event)},mousemove:function(){a.events().dragMove.call(this,event)},mouseup:function(){a.events().dragUp.call(this,event)}})},init:function(){this.cyMol.each(function(){var c=$(this);c.append(a).append(b)}),this.bind()}},new c};a.cissy=b()}(window);